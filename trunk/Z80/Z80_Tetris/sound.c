#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#include "sound.h"
#include "io.h"
#include "defs.h"

#define INIT_CMD_COUNT 16
#define SONG_CMD_COUNT 502

/******************************************************************************/
const char *init_cmds[INIT_CMD_COUNT] = {
	"VOf",

	"GSd8",

	"WF03",
	"PW0800",
	"AD010",
	"SR0a8",
	"SD006",

	"WF13",
	"PW1800",
	"AD110",
	"SR1a8",
	"SD106",

	"WF21",
	"AD210",
	"SR268",
	"SD206"
};

const char *song_cmds[SONG_CMD_COUNT] = {
	"SN0",
	"NOE5 08",
	"NOB4 04",
	"NOC5 04",
	"NOD5 04",
	"NOE5 02",
	"NOD5 02",
	"NOC5 04",
	"NOB4 04",
	"NOA4 08",
	"NOA4 04",
	"NOC5 04",
	"NOE5 08",
	"NOD5 04",
	"NOC5 04",
	"NOB4 0c",
	"NOC5 04",
	"NOD5 08",
	"NOE5 08",
	"NOC5 08",
	"NOA4 08",
	"NOA4 10",
	"NO-  04",
	"NOD5 08",
	"NOF5 04",
	"NOA5 08",
	"NOG5 04",
	"NOF5 04",
	"NOE5 0c",
	"NOC5 04",
	"NOE5 08",
	"NOD5 04",
	"NOC5 04",
	"NOB4 08",
	"NOB4 04",
	"NOC5 04",
	"NOD5 08",
	"NOE5 08",
	"NOC5 08",
	"NOA4 08",
	"NOA4 08",
	"NO-  08",
	"NOE5 08",
	"NOB4 04",
	"NOC5 04",
	"NOD5 04",
	"NOE5 02",
	"NOD5 02",
	"NOC5 04",
	"NOB4 04",
	"NOA4 08",
	"NOA4 04",
	"NOC5 04",
	"NOE5 08",
	"NOD5 04",
	"NOC5 04",
	"NOB4 0c",
	"NOC5 04",
	"NOD5 08",
	"NOE5 08",
	"NOC5 08",
	"NOA4 08",
	"NOA4 10",
	"NO-  04",
	"NOD5 08",
	"NOF5 04",
	"NOA5 08",
	"NOG5 04",
	"NOF5 04",
	"NOE5 0c",
	"NOC5 04",
	"NOE5 08",
	"NOD5 04",
	"NOC5 04",
	"NOB4 08",
	"NOB4 04",
	"NOC5 04",
	"NOD5 08",
	"NOE5 08",
	"NOC5 08",
	"NOA4 08",
	"NOA4 08",
	"NO-  08",
	"NOE4 10",
	"NOC4 10",
	"NOD4 10",
	"NOB3 10",
	"NOC4 10",
	"NOA3 10",
	"NOG3#10",
	"NOB3 10",
	"NOE4 10",
	"NOC4 10",
	"NOD4 10",
	"NOB3 10",
	"NOC4 08",
	"NOE4 08",
	"NOA4 10",
	"NOG4#20",
	"NOE4 10",
	"NOC4 10",
	"NOD4 10",
	"NOB3 10",
	"NOC4 10",
	"NOA3 10",
	"NOG3#10",
	"NOB3 10",
	"NOE4 10",
	"NOC4 10",
	"NOD4 10",
	"NOB3 10",
	"NOC4 08",
	"NOE4 08",
	"NOA4 10",
	"NOG4#20",
	"EN",
	"SN1",
	"NOB4 08",
	"NOG4#04",
	"NOA4 04",
	"NOB4 04",
	"NO-  04",
	"NOC5 04",
	"NOB4 04",
	"NOE4 08",
	"NOE4 04",
	"NOA4 04",
	"NOC5 08",
	"NOB4 04",
	"NOA4 04",
	"NOG4#04",
	"NOE4 04",
	"NOG4#04",
	"NOA4 04",
	"NOB4 08",
	"NOC5 08",
	"NOA4 08",
	"NOE4 08",
	"NOE4 10",
	"NO-  04",
	"NOF4 08",
	"NOA4 04",
	"NOC5 04",
	"NOC5 02",
	"NOC5 02",
	"NOB4 04",
	"NOA4 04",
	"NOG4 0c",
	"NOE4 04",
	"NOG4 04",
	"NOA4 02",
	"NOG4 02",
	"NOF4 04",
	"NOE4 04",
	"NOG4#04",
	"NOE4 04",
	"NOG4#04",
	"NOA4 04",
	"NOB4 04",
	"NOG4#04",
	"NOB4 04",
	"NOG4#04",
	"NOA4 04",
	"NOE4 04",
	"NOE4 08",
	"NOE4 08",
	"NO-  08",
	"NOB4 08",
	"NOG4#04",
	"NOA4 04",
	"NOB4 04",
	"NO-  04",
	"NOC5 04",
	"NOB4 04",
	"NOE4 08",
	"NOE4 04",
	"NOA4 04",
	"NOC5 08",
	"NOB4 04",
	"NOA4 04",
	"NOG4#04",
	"NOE4 04",
	"NOG4#04",
	"NOA4 04",
	"NOB4 08",
	"NOC5 08",
	"NOA4 08",
	"NOE4 08",
	"NOE4 10",
	"NO-  04",
	"NOF4 08",
	"NOA4 04",
	"NOC5 04",
	"NOC5 02",
	"NOC5 02",
	"NOB4 04",
	"NOA4 04",
	"NOG4 0c",
	"NOE4 04",
	"NOG4 04",
	"NOA4 02",
	"NOG4 02",
	"NOF4 04",
	"NOE4 04",
	"NOG4#04",
	"NOE4 04",
	"NOG4#04",
	"NOA4 04",
	"NOB4 04",
	"NOG4#04",
	"NOB4 04",
	"NOG4#04",
	"NOA4 04",
	"NOE4 04",
	"NOE4 08",
	"NOE4 08",
	"NO-  08",
	"NOC4 10",
	"NOA3 10",
	"NOB3 10",
	"NOG3#10",
	"NOA3 10",
	"NOE3 10",
	"NOE3 10",
	"NOG3 10",
	"NOC4 10",
	"NOA3 10",
	"NOB3 10",
	"NOG3#10",
	"NOA3 08",
	"NOC4 08",
	"NOE4 10",
	"NOE4 20",
	"NOC4 10",
	"NOA3 10",
	"NOB3 10",
	"NOG3#10",
	"NOA3 10",
	"NOE3 10",
	"NOE3 10",
	"NOG3 10",
	"NOC4 10",
	"NOA3 10",
	"NOB3 10",
	"NOG3#10",
	"NOA3 08",
	"NOC4 08",
	"NOE4 10",
	"NOE4 20",
	"EN",
	"SN2",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOE3#04",
	"NOE4#04",
	"NOE3 04",
	"NOE4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOG3 04",
	"NOA3 04",
	"NOB3 04",
	"NOB2 04",
	"NO-  04",
	"NOB2 04",
	"NO-  04",
	"NOB2 04",
	"NOF3 04",
	"NOB2 04",
	"NOA2 04",
	"NOA3 04",
	"NO-  04",
	"NOA3 04",
	"NOA2 04",
	"NOE3 04",
	"NOE3 04",
	"NO-  04",
	"NOG3 04",
	"NOG4 04",
	"NO-  04",
	"NOG4 04",
	"NO-  04",
	"NOE4#04",
	"NO-  04",
	"NOG4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 10",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOE3#04",
	"NOE4#04",
	"NOE3 04",
	"NOE4 04",
	"NOC3 04",
	"NOC4 04",
	"NOC3 04",
	"NOC4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOG3 04",
	"NOA3 04",
	"NOB3 04",
	"NOB2 04",
	"NO-  04",
	"NOB2 04",
	"NO-  04",
	"NOB2 04",
	"NOF3 04",
	"NOB2 04",
	"NOA2 04",
	"NOA3 04",
	"NO-  04",
	"NOA3 04",
	"NOA2 04",
	"NOE3 04",
	"NOE3 04",
	"NO-  04",
	"NOG3 04",
	"NOG4 04",
	"NO-  04",
	"NOG4 04",
	"NO-  04",
	"NOE3#04",
	"NO-  04",
	"NOG4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 04",
	"NOF4 04",
	"NOF3 10",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOF3 04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"NOE3#04",
	"NOC4 04",
	"EN"
};
/******************************************************************************/
void send_sound_cmd(char *cmd) {
	word i;

	do {
		io_write(1, *cmd | 128);
		for (i = 0; i < 15; i++);
		io_write(1, 0);
		for (i = 0; i < 15; i++);
	} while (*(cmd++));

	for (i = 0; i < 350; i++);
}
/******************************************************************************/
void start_song() {
	word i;

	for (i = 0; i < INIT_CMD_COUNT; i++)
		send_sound_cmd(init_cmds[i]);

	for (i = 0; i < SONG_CMD_COUNT; i++)
		send_sound_cmd(song_cmds[i]);

	send_sound_cmd("PLff");

}
/******************************************************************************/

